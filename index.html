<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–¥–æ—Ä–æ–≤–æ–µ —Ç–µ–ª–æ</title>
    <link rel="stylesheet" href="styles.css?v=3.4">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav id="menu" class="navbar">
            <div class="nav-item active" data-section="home">
                <span class="nav-icon">üè†</span>
                <span class="nav-text">–ì–ª–∞–≤–Ω–∞—è</span>
            </div>
            <div class="nav-item" data-section="diagnosis">
                <span class="nav-icon">üîç</span>
                <span class="nav-text">–°–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</span>
            </div>
            <div class="nav-item" data-section="exercises">
                <span class="nav-icon">üí™</span>
                <span class="nav-text">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</span>
            </div>
            <div class="nav-item" data-section="profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-text">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </div>
        </nav>

        <!-- Home Section -->
        <section id="home" class="section active">
            
            <!-- Top Right Tabs - Vertical -->
            <div class="top-tabs-vertical">
                <div class="tab-button-vertical" data-tab="progress" onclick="openTabModal('progress')">
                    <span class="tab-icon-vertical">üìä</span>
                    <span class="tab-text-vertical">–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                </div>
                <div class="tab-button-vertical" data-tab="leaderboard" onclick="openTabModal('leaderboard')">
                    <span class="tab-icon-vertical">üèÜ</span>
                    <span class="tab-text-vertical">–õ–∏–¥–µ—Ä—ã</span>
                </div>
            </div>
            
            <!-- Tab Modals -->
            <div id="progress-modal" class="tab-modal hidden">
                <div class="tab-modal-content">
                    <div class="tab-modal-header">
                        <h3>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å</h3>
                        <span class="tab-modal-close" onclick="closeTabModal()">&times;</span>
                    </div>
                    <div class="tab-modal-body">
                        <div class="progress-section">
                            <div class="progress-info">
                                <h3 class="progress-title" id="progress-title-modal">–£—Ä–æ–≤–µ–Ω—å 1: –ù–æ–≤–∏—á–æ–∫</h3>
                                <div class="progress-bar-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="progress-fill-modal" style="width: 0%"></div>
                                    </div>
                                    <span class="progress-text" id="progress-text-modal">0 –∏–∑ 7 –¥–Ω–µ–π</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Calendar Section -->
                        <div class="calendar-section">
                            <div class="calendar-header">
                                <h3>–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
                                <div class="calendar-stats">
                                    <div class="stat-item">
                                        <span class="stat-number" id="completed-days-modal">0</span>
                                        <span class="stat-label">–î–Ω–µ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-number" id="current-streak-modal">0</span>
                                        <span class="stat-label">–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è</span>
                                    </div>
                                </div>
                            </div>
                            <div class="calendar-container">
                                <div class="calendar-grid" id="calendar-grid-modal">
                                    <!-- Calendar will be generated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="leaderboard-modal" class="tab-modal hidden">
                <div class="tab-modal-content">
                    <div class="tab-modal-header">
                        <h3>üèÜ –õ–∏–¥–µ—Ä–±–æ—Ä–¥</h3>
                        <span class="tab-modal-close" onclick="closeTabModal()">&times;</span>
                    </div>
                    <div class="tab-modal-body">
                        <div class="leaderboard-section">
                            <div class="leaderboard-list" id="leaderboard-list-modal">
                                <!-- Leaderboard will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="page">
                <!-- Theme Toggle - Top Left -->
                <div id="switch" class="theme-toggle-top">
                    <div class="theme-slider" onclick="toggleTheme()">
                        <div class="theme-slider-track">
                            <div class="theme-slider-thumb" id="theme-slider-thumb">
                                <span class="theme-icon-slider" id="theme-icon-slider">üåô</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="home-container">
                <!-- Welcome Section -->
                <div id="greeting" class="welcome-section">
                    <h1 class="welcome-title" id="welcome-title">–ü—Ä–∏–≤–µ—Ç!</h1>
                    <p class="welcome-subtitle" id="welcome-subtitle">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–∞—à–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –∫ –∑–¥–æ—Ä–æ–≤–æ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏!</p>
                </div>
                
                <!-- Human Avatar Center -->
                <div id="hero" class="human-avatar-center">
                    <div class="avatar-large" id="human-avatar-large">
                        <img src="https://fs.getcourse.ru/fileservice/file/download/a/612441/sc/130/h/83ad7f33a185d049619b8a1b01c4c02d.png" alt="Human Avatar" class="avatar-image" id="avatar-image">
                    </div>
                </div>
                
                
                <!-- Level Display - Bottom Center -->
                <div id="level" class="level-display-bottom">
                    <div class="level-info">
                        <span class="level-text" id="level-text">–£—Ä–æ–≤–µ–Ω—å 1. –ù–æ–≤–∏—á–æ–∫</span>
                    </div>
                </div>
                
                </div>
            </div>
        </section>

        <!-- Self-Diagnosis Section -->
        <section id="diagnosis" class="section">
            <div class="diagnosis-container">
                <div class="section-header">
                    <h2>üîç –°–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h2>
                    <p class="section-subtitle">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∞—à–µ–≥–æ —Ç–µ–ª–∞</p>
                </div>
                
                <div class="diagnostic-modules">
                    <div class="diagnostic-card" data-module="neck">
                        <div class="diagnostic-icon">ü¶¥</div>
                        <div class="diagnostic-content">
                            <h3 class="diagnostic-title">–®–µ—è</h3>
                            <p class="diagnostic-description">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å —à–µ–∏</p>
                            <button class="diagnostic-button" onclick="startDiagnostic('neck')">
                                ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                            </button>
                        </div>
                    </div>
                    
                    <div class="diagnostic-card" data-module="shoulder">
                        <div class="diagnostic-icon">üí™</div>
                        <div class="diagnostic-content">
                            <h3 class="diagnostic-title">–ü–ª–µ—á–æ</h3>
                            <p class="diagnostic-description">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–ª–µ—á–µ–≤–æ–≥–æ —Å—É—Å—Ç–∞–≤–∞</p>
                            <button class="diagnostic-button" onclick="startDiagnostic('shoulder')">
                                ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                            </button>
                        </div>
                    </div>
                    
                    <div class="diagnostic-card" data-module="lower-back">
                        <div class="diagnostic-icon">üèÉ</div>
                        <div class="diagnostic-content">
                            <h3 class="diagnostic-title">–ü–æ—è—Å–Ω–∏—Ü–∞</h3>
                            <p class="diagnostic-description">–¢–µ—Å—Ç –≥–∏–±–∫–æ—Å—Ç–∏ –∏ –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç–∏ –ø–æ—è—Å–Ω–∏—Ü—ã</p>
                            <button class="diagnostic-button" onclick="startDiagnostic('lower-back')">
                                ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                            </button>
                        </div>
                    </div>
                    
                    <div class="diagnostic-card" data-module="hip">
                        <div class="diagnostic-icon">üçë</div>
                        <div class="diagnostic-content">
                            <h3 class="diagnostic-title">–¢–∞–∑</h3>
                            <p class="diagnostic-description">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–∑–æ–±–µ–¥—Ä–µ–Ω–Ω–æ–≥–æ —Å—É—Å—Ç–∞–≤–∞</p>
                            <button class="diagnostic-button" onclick="startDiagnostic('hip')">
                                ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                            </button>
                        </div>
                    </div>
                    
                    <div class="diagnostic-card" data-module="knee">
                        <div class="diagnostic-icon">ü¶µ</div>
                        <div class="diagnostic-content">
                            <h3 class="diagnostic-title">–ö–æ–ª–µ–Ω–æ</h3>
                            <p class="diagnostic-description">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–ª–µ–Ω–Ω–æ–≥–æ —Å—É—Å—Ç–∞–≤–∞</p>
                            <button class="diagnostic-button" onclick="startDiagnostic('knee')">
                                ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                            </button>
                        </div>
                    </div>
                    
                    <div class="diagnostic-card" data-module="foot">
                        <div class="diagnostic-icon">üë£</div>
                        <div class="diagnostic-content">
                            <h3 class="diagnostic-title">–°—Ç–æ–ø–∞</h3>
                            <p class="diagnostic-description">–¢–µ—Å—Ç –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç–∏ –∏ –≥–∏–±–∫–æ—Å—Ç–∏ —Å—Ç–æ–ø—ã</p>
                            <button class="diagnostic-button" onclick="startDiagnostic('foot')">
                                ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Exercises Section -->
        <section id="exercises" class="section">
            <div class="exercises-container">
                <h2 class="section-title">–ü—Ä–æ–≥—Ä–∞–º–º—ã —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</h2>
                <div class="programs-grid" id="programs-grid">
                    <!-- Programs will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Program Detail Modal -->
        <div id="program-modal" class="modal hidden">
            <div class="modal-content">
                <span class="close" onclick="closeProgramModal()">&times;</span>
                <div class="modal-body" id="program-modal-body">
                    <!-- Program details will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Exercise Module Modal -->
        <div id="exercise-modal" class="modal hidden">
            <div class="modal-content exercise-modal-content">
                <span class="close" onclick="closeExerciseModal()">&times;</span>
                <div class="modal-body" id="exercise-modal-body">
                    <!-- Exercise details will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Profile Section -->
        <section id="profile" class="section">
            <div class="profile-container">
                <h2 class="section-title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                <div class="profile-form">
                    <div class="form-group">
                        <label for="user-name">–ò–º—è</label>
                        <input type="text" id="user-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
                    </div>
                    <div class="form-group">
                        <label for="user-birthdate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                        <input type="date" id="user-birthdate">
                    </div>
                    <div class="form-group">
                        <label for="user-problem">–ü—Ä–æ–±–ª–µ–º–Ω–∞—è –∑–æ–Ω–∞</label>
                        <select id="user-problem">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—É—é –∑–æ–Ω—É</option>
                            <option value="shoulders">–ü–ª–µ—á–µ–≤–æ–π –ø–æ—è—Å</option>
                            <option value="back">–°–ø–∏–Ω–∞</option>
                            <option value="core">–ü—Ä–µ—Å—Å</option>
                            <option value="legs">–ù–æ–≥–∏</option>
                            <option value="full-body">–í—Å–µ —Ç–µ–ª–æ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–ü–æ–¥–ø–∏—Å–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ</label>
                        <div class="subscription-info" id="subscription-date">
                            –ó–∞–≥—Ä—É–∑–∫–∞...
                        </div>
                    </div>
                    <button class="save-button" onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                    
                    <!-- Dev debug line (visible only with ?dev=1) -->
                    <p id="dev-debug-line" style="display:none; margin-top:10px; color:#6c757d; font-size:12px;"></p>
                    
                    <!-- Developer Access Section -->
                    <div class="developer-access-section">
                        <h3>–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</h3>
                        <p>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
                        <button class="developer-access-button" onclick="openDeveloperAccess()">
                            –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Developer Editor Panel -->
        <section id="developer-panel" class="section developer-panel hidden">
            <div class="developer-container">
                <div class="developer-header">
                    <h2>–†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h2>
                    <button class="close-dev-panel" onclick="closeDeveloperPanel()">&times;</button>
                </div>
                
                <div class="developer-tabs">
                    <div class="dev-tab active" data-tab="home-content">–ì–ª–∞–≤–Ω–∞—è</div>
                    <div class="dev-tab" data-tab="programs-content">–ü—Ä–æ–≥—Ä–∞–º–º—ã</div>
                    <div class="dev-tab" data-tab="settings-content">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                </div>
                
                <!-- Home Content Editor -->
                <div id="home-content" class="dev-tab-content active">
                    <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
                    <div class="form-group">
                        <label for="dev-hero-image">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–µ—Ä–æ—è</label>
                        <input type="url" id="dev-hero-image" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label for="dev-headline">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                        <input type="text" id="dev-headline" placeholder="–ó–¥–æ—Ä–æ–≤–æ–µ —Ç–µ–ª–æ">
                    </div>
                    <div class="form-group">
                        <label for="dev-greeting">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ</label>
                        <textarea id="dev-greeting" placeholder="–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–∞—à–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –∫ –∑–¥–æ—Ä–æ–≤–æ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏!"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="dev-cta">–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏</label>
                        <input type="text" id="dev-cta" placeholder="–ü–µ—Ä–µ–π—Ç–∏ –∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º">
                    </div>
                    <button class="save-button" onclick="saveHomeContent()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
                
                <!-- Programs Content Editor -->
                <div id="programs-content" class="dev-tab-content">
                    <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏</h3>
                    <div class="programs-list" id="dev-programs-list">
                        <!-- Programs will be loaded here -->
                    </div>
                    <button class="save-button" data-action="program-add">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É</button>
                </div>
                
                <!-- Settings Editor -->
                <div id="settings-content" class="dev-tab-content">
                    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="dev-calendar-enabled" checked>
                            <span class="checkmark"></span>
                            –í–∫–ª—é—á–∏—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å
                        </label>
                    </div>
                    <button class="save-button" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    
                    <h3 style="margin-top: 30px;">–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button class="btn btn-secondary" onclick="exportContent()">–≠–∫—Å–ø–æ—Ä—Ç JSON</button>
                        <button class="btn btn-secondary" onclick="importContent()">–ò–º–ø–æ—Ä—Ç JSON</button>
                    </div>
                    <p style="color: #6c757d; font-size: 14px; margin-top: 10px;">
                        –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –ø—Ä–æ–≥—Ä–∞–º–º, –¥–Ω–µ–π –∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.
                    </p>
                </div>
            </div>
        </section>

        

        <!-- Subscription Expired Overlay -->
        <div id="subscription-overlay" class="overlay hidden">
            <div class="overlay-content">
                <h3>–ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–ª–∞</h3>
                <p>–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É.</p>
                <button class="cta-button" onclick="renewSubscription()">–ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="./config.js?v=3.1"></script>
    <script src="./app.js?v=3.5"></script>
</body>
</html>
